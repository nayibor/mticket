/*
Navicat MySQL Data Transfer

Source Server         : mobiticketz_remote_server
Source Server Version : 50096
Source Host           : mobiticketz.db.10232554.hostedresource.com:3306
Source Database       : mobiticketz

Target Server Type    : MYSQL
Target Server Version : 50096
File Encoding         : 65001

Date: 2014-11-05 02:07:35
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `apps`
-- ----------------------------
DROP TABLE IF EXISTS `apps`;
CREATE TABLE `apps` (
  `AppId` varchar(100) NOT NULL,
  `AppName` varchar(200) NOT NULL,
  `AppDate` datetime NOT NULL,
  `AppStatus` varchar(45) NOT NULL,
  `AppKey` varchar(100) NOT NULL,
  `DevId` int(10) unsigned NOT NULL,
  PRIMARY KEY  (`AppId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='lists the apps of developers';

-- ----------------------------
-- Records of apps
-- ----------------------------

-- ----------------------------
-- Table structure for `appusers`
-- ----------------------------
DROP TABLE IF EXISTS `appusers`;
CREATE TABLE `appusers` (
  `EmailAddress` varchar(100) NOT NULL,
  `Password` varchar(100) NOT NULL,
  `ContactNo` varchar(45) NOT NULL,
  `Address` varchar(100) NOT NULL,
  `Status` varchar(45) NOT NULL,
  `DateReg` datetime NOT NULL,
  PRIMARY KEY  (`EmailAddress`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='stores the app users available';

-- ----------------------------
-- Records of appusers
-- ----------------------------

-- ----------------------------
-- Table structure for `batches`
-- ----------------------------
DROP TABLE IF EXISTS `batches`;
CREATE TABLE `batches` (
  `id` int(11) NOT NULL auto_increment,
  `batch_name` varchar(255) default NULL,
  `batch_event_id` int(11) default NULL,
  `batch_allow_download` enum('0','1') default '0',
  `batch_create_date` timestamp NULL default NULL,
  `ticket_cost` float default NULL,
  `rrn` int(11) default NULL,
  `batch_ticket_number` int(11) default NULL,
  `batch_last_update_dt` timestamp NULL default NULL on update CURRENT_TIMESTAMP,
  `site_id` int(11) default NULL,
  `batch_verification_start` timestamp NULL default NULL,
  `batch_verification_end` timestamp NULL default NULL,
  `batch_status_tickets` enum('1','0','2','-1') default '-1' COMMENT '0--inprogress,1--done,-1--disabled,2--enabled',
  `batch_status_email` enum('-1','1','2','0') default '-1' COMMENT '0--inprogress,1--done,-1--disabled,2--enabled',
  `batch_category` int(11) default NULL,
  `medium_del` enum('both','text','email') default 'email',
  `ticketype` int(11) default NULL,
  `apy_ticket` enum('0','1') default NULL,
  PRIMARY KEY  (`id`),
  KEY `batch_event` (`batch_event_id`),
  KEY `batch_category_fk` (`batch_category`),
  KEY `ticket_type` (`ticketype`),
  CONSTRAINT `batch_category_fk` FOREIGN KEY (`batch_category`) REFERENCES `categories` (`id`),
  CONSTRAINT `batch_event` FOREIGN KEY (`batch_event_id`) REFERENCES `events` (`id`),
  CONSTRAINT `ticket_type` FOREIGN KEY (`ticketype`) REFERENCES `ticket_types` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of batches
-- ----------------------------
INSERT INTO `batches` VALUES ('28', 'Fresh Tester', '18', '1', null, null, null, '5', '2013-02-27 22:00:27', '1', null, null, '1', '2', '1', '', '1', null);
INSERT INTO `batches` VALUES ('29', 'primary', '18', '0', null, null, null, '2', '2013-02-27 22:02:34', '1', null, null, '-1', '0', '2', 'text', '3', null);
INSERT INTO `batches` VALUES ('32', 'ftester', '18', '1', null, null, null, '20', null, '1', null, null, '-1', '1', '1', 'both', '1', null);

-- ----------------------------
-- Table structure for `categories`
-- ----------------------------
DROP TABLE IF EXISTS `categories`;
CREATE TABLE `categories` (
  `id` int(11) NOT NULL auto_increment,
  `short_name` varchar(255) default NULL,
  `long_name` varchar(255) default NULL,
  `inst_id` int(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of categories
-- ----------------------------
INSERT INTO `categories` VALUES ('1', 'VIP', 'VERY IMPORTANT PERSON', '1');
INSERT INTO `categories` VALUES ('2', 'HUSTLER', 'SCHOOL OF HK', '1');
INSERT INTO `categories` VALUES ('3', 'WKIN', 'WALK IN', '1');
INSERT INTO `categories` VALUES ('4', 'EPR', 'Eprocess', null);
INSERT INTO `categories` VALUES ('5', 'EPGHANA', 'EPROCESS', '1');

-- ----------------------------
-- Table structure for `developers`
-- ----------------------------
DROP TABLE IF EXISTS `developers`;
CREATE TABLE `developers` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `Name` varchar(200) NOT NULL,
  `EmailAddress` varchar(100) NOT NULL,
  `Password` varchar(100) NOT NULL,
  `Status` varchar(100) NOT NULL,
  `RegDate` datetime NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='stores all developers on our system';

-- ----------------------------
-- Records of developers
-- ----------------------------

-- ----------------------------
-- Table structure for `events`
-- ----------------------------
DROP TABLE IF EXISTS `events`;
CREATE TABLE `events` (
  `id` int(11) NOT NULL auto_increment,
  `event_name` varchar(255) default NULL,
  `event_start` timestamp NULL default NULL,
  `event_end` timestamp NULL default NULL on update CURRENT_TIMESTAMP,
  `event_location` varchar(255) default NULL,
  `retrieval_reference_number` int(11) default NULL,
  `site_id` int(11) default NULL,
  `event_banner` mediumblob,
  `event_type` varchar(100) NOT NULL,
  `event_description` varchar(30) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of events
-- ----------------------------
INSERT INTO `events` VALUES ('10', 'Buster', '2013-10-20 16:32:02', '2013-10-20 16:32:02', 'Free', null, null, 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Movie', 'This is a test of the event de');
INSERT INTO `events` VALUES ('11', 'Ghost Buster Movie', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'Accra Mall', null, null, 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Movie', '');
INSERT INTO `events` VALUES ('12', 'mp movie', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'moving pick', null, null, 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Sports', '');
INSERT INTO `events` VALUES ('16', 'load', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'test', null, null, 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Sports', '');
INSERT INTO `events` VALUES ('17', 'further ', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'testing', null, null, 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Movie', '');
INSERT INTO `events` VALUES ('18', 'newEventTester', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'Montee Carloo', null, '1', 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Sports', '');
INSERT INTO `events` VALUES ('19', 'Final', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'asdf', null, '1', 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Sports', '');
INSERT INTO `events` VALUES ('20', 'Fresh', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'asdf', null, '1', 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Sports', '');
INSERT INTO `events` VALUES ('21', 'smoothy club f', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'smmoohties osu', null, '1', 0x6956424F5277304B47676F414141414E5355684555674141414663414141425841514D414141424C426B737641414141426C424D5645582F2F2F38414141425677744E2B4141414171556C4520515651346A633353735133454941774655434D583179554C6E4A513136466A707367457345466169593431494C4A4569756E3857643563307762527839526F7338323269753955495242526720565477514C375A345575334B516879336A695036396C51366C6F615A6A786B754C66504C624D64664C69316C2F6D68355441695A35752F6270702B436C394E737741474D5249724A376E4F61206F75726877646A6761382B57617851645377376537695A70726E6D757332375A58656133367A6A6B3165534F7666766C304C5463473033496D75742B45633564582F6865395146717A686843206F48736F445141414141424A52553545726B4A6767673D3D, 'Sports', '');
INSERT INTO `events` VALUES ('22', 'test', '2013-09-17 18:50:18', '2013-09-17 18:52:22', 'AICC', null, '1', null, '', '');

-- ----------------------------
-- Table structure for `eventtypes`
-- ----------------------------
DROP TABLE IF EXISTS `eventtypes`;
CREATE TABLE `eventtypes` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `EventType` varchar(100) NOT NULL,
  `Logo` longblob NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='list the event types available';

-- ----------------------------
-- Records of eventtypes
-- ----------------------------

-- ----------------------------
-- Table structure for `favourites`
-- ----------------------------
DROP TABLE IF EXISTS `favourites`;
CREATE TABLE `favourites` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `ItemId` int(10) unsigned NOT NULL,
  `UserId` varchar(100) NOT NULL,
  `Type` varchar(100) NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='favourites of app users';

-- ----------------------------
-- Records of favourites
-- ----------------------------

-- ----------------------------
-- Table structure for `institutions`
-- ----------------------------
DROP TABLE IF EXISTS `institutions`;
CREATE TABLE `institutions` (
  `id` int(11) NOT NULL auto_increment,
  `inst_short_name` varchar(255) default NULL,
  `inst_long_name` varchar(255) default NULL,
  `inst_lock` enum('1','0') default '0',
  `email` varchar(255) default NULL,
  `phone` varchar(255) default NULL,
  `fax` varchar(255) default NULL,
  `city` varchar(255) default NULL,
  `description` varchar(255) default NULL,
  `address` varchar(255) default NULL,
  `image_cus_site` longblob,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of institutions
-- ----------------------------
INSERT INTO `institutions` VALUES ('1', 'Local-First', 'Localhost -First Guinea Pig', '1', 'fasdf@hay.com', '98707', '0245707630', 'fracni', 'testing sthis stuff out', 'jjj', null);
INSERT INTO `institutions` VALUES ('2', 'SilverBird', 'Silverbird Worldwide Inc', '0', null, null, null, null, null, null, null);
INSERT INTO `institutions` VALUES ('3', 'EP', 'Eprcoess', '0', 'naywer@as.com', '9898', '990967', 'asdf', 'asdfsadf', null, null);
INSERT INTO `institutions` VALUES ('4', 'Defalut', 'adsf', '0', 'nay@a.com', 'asdf', '908098', 'asdf', 'adfasfasfd', 'adsfdsa', null);
INSERT INTO `institutions` VALUES ('5', 'Defalut2', 'adsf', '0', 'nay@a.com', 'asdf', '908098', 'asdf', 'adfasfasfd', 'adsfdsa', null);
INSERT INTO `institutions` VALUES ('6', 'TESTS', 'TESTOLD', '0', '1380', 'TEST', '32332', 'TESTE', 'ASDFSDD', 'ASDFDS', null);
INSERT INTO `institutions` VALUES ('7', 'TESTS7777', 'TESTNEW', '1', '1380', 'TEST', '32332', 'TESTE', 'ASDFSDD', 'ASDFDS', null);
INSERT INTO `institutions` VALUES ('8', 'test', 'test', '0', 'aluta182004@gmail.com', '0242182591', '222', 'accra', 'box 5 accra', 'test', 0x2F396A2F34414151536B5A4A5267414241514141415141424141442F2F67413751314A4651565250556A6F675A325174616E426C5A7942324D5334774943683163326C755A79424A536B636720536C4246527942324E7A41704C4342786457467361585235494430674F54414B2F39734151774144416749444167494441774D4442414D4442415549425155454241554B427763474341774B204441774C4367734C445134534541304F4551344C437841574542455446425556465177504678675746426753464255552F39734151774544424151464241554A4251554A4641304C4452515520464251554642515546425155464251554642515546425155464251554642515546425155464251554642515546425155464251554642515546425155464251552F384141455167414D67417920417745694141495241514D5241662F454142384141414546415145424151454241414141414141414141414241674D454251594843416B4B432F2F45414C55514141494241774D4342414D462042515145414141426651454341774145455155534954464242684E525951636963525179675A476843434E4373634556557448774A444E69636F494A4368595847426B614A53596E4B436B71204E4455324E7A67354F6B4E4552555A4853456C4B55315256566C64595756706A5A47566D5A326870616E4E3064585A3365486C3667345346686F6549695971536B3553566C7065596D5A7169206F36536C7071656F716171797337533174726534756272437738544678736649796372533039545631746659326472683475506B3565626E364F6E7138664C7A39505832392F6A352B762F45204142384241414D42415145424151454241514541414141414141414241674D454251594843416B4B432F2F45414C555241414942416751454177514842515145414145436477414241674D5220424155684D5159535156454859584554496A4B42434252436B61477877516B6A4D314C7746574A7930516F574A4454684A66455847426B614A69636F4B536F314E6A63344F54704452455647205230684A536C4E5556565A5857466C615932526C5A6D646F6157707A6448563264336835656F4B44684957476834694A69704B546C4A57576C35695A6D714B6A704B576D7036697071724B7A20744C57327437693575734C44784D584778386A4A79744C54314E585731396A5A32754C6A354F586D352B6A7036764C7A39505832392F6A352B762F61414177444151414345514D5241443841202F5458557457736445732F74576F58747659576F49557A335571786F435467446378417954554358656E613361792F5A7271327649385A4C5738717959342F3253666576684C39726634345320616634777637652B4E793172444B31725A43486138556167344A4234356661474A775479426B6856783470344F2F61513166777072567463574F7065525043353244634356366A6F777765702042423635493656364546443755724D2B6635616C72786A6448364C36356F506C7A506851564F635A484A4E637863614F30546268467A67384833474B39462B483276577678563841365234722073306A6A6831474C7A664B6A6470504B5945724A486C6B5573566457584F3342786B63594E576237773935546A354344376436356662585A337A67347831504C4E41734C6D7A3853586D725020416C78427030437044626D6242615578544F796E73684F4975657079446A474B39442B48674E70345A75476E6D626D5A336B754A47352B3475574A3965707A584E7645706838514B3175384C2074724F465351453768466251786C676359414A47636535786E6D756B3847754830712F696B6D2B7A5252455365614743374F4364784A34774E6F363864633547613632314B6D31354869754C20636E4A64575A456B3268423242384D362F636E4A7A4F4E4D6D784A2F74647576586F506F4B4B3476554E65304B652F755A427250694E5138724D42627952694D5A4A2B376B5A322B6D6563552056385248465965792F64792F3841582F414D6B66574C4A63633076396E6C2F354E2F6D6643767871764E44756457687539537462796130302B55695343315A6D74304734684238787A2F3439206B68526B6B313445326F2F3274726331326A4950506D4C6C57554447546E6A303631364E38595046476E58562F637A574574303168634B7774704C61554247426B6237323541784255446A352065696B6A303875384A6930757645326D513667303636644A645269356133414D6F693344655542344C6263347A786D76704A54664C7A49776F7753535032572F5A75316E5466412F774E2B4720756B4B7572616F6453736F37694F3573394A754A6F596D754A53355753534E47534D493070557378417775376756374A714678444338652F416373414F6E6669766A4C346166745A614A7164202F6F506748546F726A52397353366670784D307345416A534C39314469516C764E47315963426D4479446734494A354C346F66745051506558326C527A3679737472656D3275515747325246206B32794247336B44494278755667656858424F4F614D70543269302B76396667615655755632647A37453856756C775A70684968565A664B51704B58553754383256364B32347370786B2F4B204D6E734F617362756553573473375A586E4D3066797870414A564C6831436C77526A62686D424A34476339514B38343044347748787A344430765770702F4E754C714D4E4D776A4D5938304D20566B777659627731643338496645733137716C356251784A4A484A474A484C75515643746A4977446E372F546A3669752B4D585567344E32504B686949344F7371317232765A507630667933202F7741696C42384272745959773937417242514373636A68516364734B4F5077464665786C2B614B7059536D752F384158794E33784C6A372F4576752F7744746A2B662B2F6C6437654F4F51204F72786A6156626A42394D6668576834557358524C72564A55593239704764724665504D4F4176586A494C4B634849506F6139422B5066684B57782B4B383168623663713356393559697372204F4C2F6C71783237565566654A49366A37784A72532B4D48674F48346561396F2F6732457761686457746D6B31307967706775474B7177444D364568697A49517047346473563835557879712055365369745A7137386B742F78305871656E52555A61742F38457132666A434C5276446C6F424A4663796D366A5361786C32737A7771685A515151666C42355546635A4F534458302F6F48782074316678707044365A71757358576F54365663776B2F61627153594D385A56344C6864784F47444B47446665444A6E6739506972532F456132757058312B68534270625A34764B504371414620326766676F48727837313248773938595332506A617874306542624B61322B7A5951425230334B54676B46695639543934393831343954445649637A6864573133667131703232763150515620534E745666376A3333786A346D6C38506542745467306C7A7069576C704C4A627832763774496D436C675655636465656E6576522F44486A49334D436C6D79306B595959363831383465505020456A793648726473495A7A2F414B4B366D54614370334965687A32357A394B37627746346C61397337646C6A6C6A564931486D53446172355850793979426E726A42374531377555562B614420752B756D2F59386E4E3844586848326B71646B6C6437624E704C72316653312F4C523239636B3852534C49774448414A78306F72676E3164743763723139614B2B703535487850732F5038412072376A7769396A5344347257516955526932385679527742426A796B5677565666376F423641644B347234313345747A385A7648306B3072797944577278417A735351717A75716A4A37414120414473414252525877655836316C2F672F7744626B6664665952774630534636396D2F705857654535586B315452697A737857376A436B6E4F426C4F425252587656463768533350572F476220482B77645235502F414237792F77446F4A72662B485473644630664C452F364B76663841325252525765556677352F49387A4D756E2B4C39546F3557496C666B2F654E46464666585258756F202B4E6B2F655A2F2F32513D3D);
INSERT INTO `institutions` VALUES ('9', 'test', 'test', '0', 'aluta182004@gmail.com', '0242182591', '222', 'accra', 'box 5 accra', 'test', 0x2F396A2F34414151536B5A4A5267414241514141415141424141442F2F67413751314A4651565250556A6F675A325174616E426C5A7942324D5334774943683163326C755A79424A536B63670D0A536C4246527942324E7A41704C4342786457467361585235494430674F54414B2F39734151774144416749444167494441774D4442414D4442415549425155454241554B427763474341774B0D0A4441774C4367734C445134534541304F4551344C437841574542455446425556465177504678675746426753464255552F39734151774544424151464241554A4251554A4641304C445251550D0A464251554642515546425155464251554642515546425155464251554642515546425155464251554642515546425155464251554642515546425155464251552F384141455167414D6741790D0A417745694141495241514D5241662F454142384141414546415145424151454241414141414141414141414241674D454251594843416B4B432F2F45414C55514141494241774D4342414D460D0A42515145414141426651454341774145455155534954464242684E525951636963525179675A476843434E4373634556557448774A444E69636F494A4368595847426B614A53596E4B436B710D0A4E4455324E7A67354F6B4E4552555A4853456C4B55315256566C64595756706A5A47566D5A326870616E4E3064585A3365486C3667345346686F6549695971536B3553566C7065596D5A71690D0A6F36536C7071656F716171797337533174726534756272437738544678736649796372533039545631746659326472683475506B3565626E364F6E7138664C7A39505832392F6A352B762F450D0A4142384241414D42415145424151454241514541414141414141414241674D454251594843416B4B432F2F45414C555241414942416751454177514842515145414145436477414241674D520D0A424155684D5159535156454859584554496A4B42434252436B61477877516B6A4D314C7746574A7930516F574A4454684A66455847426B614A69636F4B536F314E6A63344F547044524556470D0A5230684A536C4E5556565A5857466C615932526C5A6D646F6157707A6448563264336835656F4B44684957476834694A69704B546C4A57576C35695A6D714B6A704B576D7036697071724B7A0D0A744C57327437693575734C44784D584778386A4A79744C54314E585731396A5A32754C6A354F586D352B6A7036764C7A39505832392F6A352B762F61414177444151414345514D52414438410D0A2F5458557457736445732F74576F58747659576F49557A335571786F435467446378417954554358656E613361792F5A7271327649385A4C5738717959342F3253666576684C3972663434530D0A616634777637652B4E793172444B31725A43486138556167344A4234356661474A775479426B6856783470344F2F61513166777072567463574F7065525043353244634356366A6F777765700D0A42423635493656364546443755724D2B6635616C72786A6448364C36356F506C7A506851564F635A484A4E637863614F30546268467A67384833474B39462B483276577678563841365234720D0A73306A6A6831474C7A664B6A6470504B5945724A486C6B5573566457584F3342786B63594E576237773935546A354344376436356662585A337A67347831504C4E41734C6D7A3853586D72500D0A416C78427030437044626D6242615578544F796E73684F4975657079446A474B39442B48674E70345A75476E6D626D5A336B754A47352B3475574A3965707A584E7645706838514B3175384C0D0A74724F465351453768466251786C676359414A47636535786E6D756B3847754830712F696B6D2B7A5252455365614743374F4364784A34774E6F363864633547613632314B6D31354869754C0D0A636E4A64575A456B3268423242384D362F636E4A7A4F4E4D6D784A2F74647576586F506F4B4B3476554E65304B652F755A427250694E5138724D42627952694D5A4A2B376B5A322B6D6563550D0A56385248465965792F64792F3841582F414D6B66574C4A63633076396E6C2F354E2F6D6643767871764E44756457687539537462796130302B55695343315A6D74304734684238787A2F34390D0A6B68526B6B313445326F2F3274726331326A4950506D4C6C57554447546E6A303631364E38595046476E58562F637A574574303168634B7774704C61554247426B6237323541784255446A350D0A65696B6A303875384A6930757645326D513667303636644A645269356133414D6F693344655542344C6263347A786D76704A54664C7A49776F7753535032572F5A75316E5466412F774E2B470D0A756B4B7572616F6453736F37694F3573394A754A6F596D754A53355753534E47534D493070557378417775376756374A714678444338652F416373414F6E6669766A4C346166745A614A71640D0A2F6F506748546F726A52397353366670784D307345416A534C39314469516C764E47315963426D4479446734494A354C346F66745051506558326C527A3679737472656D32755157473252460D0A6B32794247336B44494278755667656858424F4F614D70543269302B76396667615655755632647A37453856756C775A70684968565A664B51704B58553754383256364B32347370786B2F4B0D0A4D6E734F617362756553573473375A586E4D3066797870414A564C6831436C77526A62686D424A34476339514B38343044347748787A344430765770702F4E754C714D4E4D776A4D5938304D0D0A566B777659627731643338496645733137716C356251784A4A484A474A484C75515643746A4977446E372F546A3669752B4D585567344E32504B686949344F7371317232765A5076306679330D0A2F7741696C42384272745959773937417242514373636A68516364734B4F5077464665786C2B614B7059536D752F384158794E33784C6A372F4576752F7744746A2B662B2F6C6437654F4F510D0A4F72786A6156626A42394D6668576834557358524C72564A55593239704764724665504D4F4176586A494C4B634849506F6139422B5066684B57782B4B3831686236637133563935596973720D0A4F4C2F6C71783237565566654A49366A37784A72532B4D48674F48346561396F2F6732457761686457746D6B31307967706775474B7177444D364568697A49517047346473563835557879710D0A55365369745A7137386B742F78305871656E52555A61742F38457132666A434C5276446C6F424A4663796D366A5361786C32737A7771685A515151666C42355546635A4F534458302F6F48780D0A74316678707044365A71757358576F54365663776B2F61627153594D385A56344C6864784F47444B47446665444A6E6739506972532F456132757058312B68534270625A34764B50437141460D0A326766676F48727837313248773938595332506A617874306542624B61322B7A5951425230334B54676B46695639543934393831343954445649637A686457313366713170323276315051560D0A534E745666376A3333786A346D6C38506542745467306C7A7069576C704C4A627832763774496D436C675655636465656E6576522F44486A49334D436C6D79306B59595936383138346550500D0A456A793648726473495A7A2F414B4B366D54614370334965687A32357A394B37627746346C61397337646C6A6C6A564931486D53446172355850793979426E726A42374531377555562B61440D0A752B756D2F59386E4E3844586848326B71646B6C6437624E704C72316653312F4C523239636B3852534C49774448414A78306F72676E3164743763723139614B2B703535487850732F5038410D0A72376A7769396A5344347257516955526932385679527742426A796B5677565666376F423641644B347234313345747A385A7648306B3072797944577278417A735351717A75716A4A3741410D0A414473414252525877655836316C2F672F7744626B6664665952774630534636396D2F705857654535586B315452697A737857376A436B6E4F426C4F425252587656463768533350572F47620D0A482B77645235502F414237792F77446F4A72662B485473644630664C452F364B76663841325252525765556677352F49387A4D756E2B4C39546F3557496C666B2F654E46464666585258756F0D0A2B4E6B2F655A2F2F32513D3D);

-- ----------------------------
-- Table structure for `links`
-- ----------------------------
DROP TABLE IF EXISTS `links`;
CREATE TABLE `links` (
  `id` int(11) NOT NULL auto_increment,
  `link_controller` varchar(255) NOT NULL,
  `link_action` varchar(255) NOT NULL,
  `link_allow` enum('true','false') NOT NULL,
  `link_category` varchar(255) NOT NULL,
  `link_name` varchar(255) NOT NULL,
  `parameter` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of links
-- ----------------------------
INSERT INTO `links` VALUES ('9', 'Reception', 'view_events', 'true', 'Events', 'View Events', null);
INSERT INTO `links` VALUES ('10', 'Reception', 'verify_tickets', 'true', 'Tracking', 'Verify Tickets', null);
INSERT INTO `links` VALUES ('11', 'User', 'view_users', 'true', 'Staff', 'View Staff', null);
INSERT INTO `links` VALUES ('12', 'Reception', 'view_batches', 'true', 'Events', 'View Batches', null);
INSERT INTO `links` VALUES ('15', 'Reception', 'view_eventsales', 'true', 'Tracking', 'View Event Ticket Sales', null);
INSERT INTO `links` VALUES ('16', 'Reception', 'upload_tickets', 'false', 'Events', 'Upload ', null);
INSERT INTO `links` VALUES ('17', 'Admin', 'view_roles', 'true', 'Admin', 'View Roles', null);
INSERT INTO `links` VALUES ('18', 'Reception', 'view_regions', 'false', 'Events', 'Create Tickets', null);
INSERT INTO `links` VALUES ('19', 'Recption', 'view_regions', 'false', 'Events', 'Download Tickets', null);
INSERT INTO `links` VALUES ('20', 'Site', 'view_sites', 'true', 'Staff', 'View Sites', null);
INSERT INTO `links` VALUES ('22', 'Admin', 'view_inst', 'true', 'Admin', 'View Institutions', null);
INSERT INTO `links` VALUES ('23', 'Reception', 'view_tickettype', 'true', 'Events', 'View Ticket  Types', null);
INSERT INTO `links` VALUES ('24', 'Customer', 'view_cust', 'true', 'Staff', 'View Customers', null);
INSERT INTO `links` VALUES ('25', 'Customer', 'view_cat', 'true', 'Staff', 'View  Category', null);

-- ----------------------------
-- Table structure for `logs`
-- ----------------------------
DROP TABLE IF EXISTS `logs`;
CREATE TABLE `logs` (
  `id` int(11) NOT NULL auto_increment,
  `log_type` enum('ticket_return','ticket_delete','ticket_redeem','ticket_create','ticket_batch_create') default NULL,
  `log_text_reason` varchar(255) default NULL,
  `site_id` int(11) default NULL,
  `user_action` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of logs
-- ----------------------------

-- ----------------------------
-- Table structure for `member_ticket`
-- ----------------------------
DROP TABLE IF EXISTS `member_ticket`;
CREATE TABLE `member_ticket` (
  `id` int(11) NOT NULL auto_increment,
  `email_member` varchar(255) default NULL,
  `ticket_id` int(11) default NULL,
  `site_id` int(11) default NULL,
  `event_id` varchar(255) default NULL,
  `del_medium` enum('both','email','text') default NULL,
  `cell_number_member` enum('') default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='logs for tickets sent to customer are kept here ';

-- ----------------------------
-- Records of member_ticket
-- ----------------------------

-- ----------------------------
-- Table structure for `members`
-- ----------------------------
DROP TABLE IF EXISTS `members`;
CREATE TABLE `members` (
  `id` int(11) NOT NULL auto_increment,
  `email` varchar(255) default NULL,
  `fname` varchar(255) default NULL,
  `lname` varchar(255) default NULL,
  `cell_number` varchar(255) default NULL,
  `cat_id` int(11) default NULL,
  `site_id` int(255) default NULL,
  PRIMARY KEY  (`id`),
  KEY `memer-fk` (`cat_id`),
  KEY `mbmer-site-fk` (`site_id`),
  CONSTRAINT `mbmer-site-fk` FOREIGN KEY (`site_id`) REFERENCES `sites` (`id`),
  CONSTRAINT `memer-fk` FOREIGN KEY (`cat_id`) REFERENCES `categories` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of members
-- ----------------------------
INSERT INTO `members` VALUES ('1', 'nayibor@gmail.com', 'Nuku', 'Ameyibor', '0245707630', '3', '1');

-- ----------------------------
-- Table structure for `payments`
-- ----------------------------
DROP TABLE IF EXISTS `payments`;
CREATE TABLE `payments` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `MMAcc` varchar(100) NOT NULL,
  `Total` float NOT NULL,
  `PayDate` varchar(45) NOT NULL,
  `Description` varchar(200) NOT NULL,
  `EventId` varchar(45) NOT NULL,
  `Ticket` varchar(45) NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1 COMMENT='stores payments that have been made';

-- ----------------------------
-- Records of payments
-- ----------------------------
INSERT INTO `payments` VALUES ('12', '18', '50', '11-Sep-13', 'ticket purchase', '18', '9e0jqt6duc9llrc1v6s507r4g4');
INSERT INTO `payments` VALUES ('13', '18', '50', '11-Sep-13 8:01:05', 'newEventTester ticket purchase', '18', 'fnp5111ngup01vnocaqjmqs9q1');
INSERT INTO `payments` VALUES ('14', '', '50', '11-Sep-13 8:23:03', 'newEventTester ticket purchase', '18', 'b8212fo6vrnamhe6bt09gjbet3');
INSERT INTO `payments` VALUES ('15', 'aluta182004@gmail.com', '50', '11-Sep-13 8:27:07', 'newEventTester ticket purchase', '18', 'aei98tua7ohtp5jfu08i3sdu33');

-- ----------------------------
-- Table structure for `role_links`
-- ----------------------------
DROP TABLE IF EXISTS `role_links`;
CREATE TABLE `role_links` (
  `id` int(11) NOT NULL auto_increment,
  `link_id` int(11) default NULL,
  `role_id` int(11) default NULL,
  PRIMARY KEY  (`id`),
  KEY `roles-fk` (`role_id`),
  KEY `links-fk` (`link_id`),
  CONSTRAINT `links-fk` FOREIGN KEY (`link_id`) REFERENCES `links` (`id`),
  CONSTRAINT `roles-fk` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of role_links
-- ----------------------------
INSERT INTO `role_links` VALUES ('1', '12', '2');
INSERT INTO `role_links` VALUES ('2', '9', '2');
INSERT INTO `role_links` VALUES ('3', '10', '1');
INSERT INTO `role_links` VALUES ('5', '15', '1');
INSERT INTO `role_links` VALUES ('6', '11', '3');
INSERT INTO `role_links` VALUES ('8', '20', '3');
INSERT INTO `role_links` VALUES ('9', '17', '4');
INSERT INTO `role_links` VALUES ('10', '22', '4');
INSERT INTO `role_links` VALUES ('11', '23', '2');
INSERT INTO `role_links` VALUES ('14', '24', '3');
INSERT INTO `role_links` VALUES ('15', '25', '3');

-- ----------------------------
-- Table structure for `roles`
-- ----------------------------
DROP TABLE IF EXISTS `roles`;
CREATE TABLE `roles` (
  `id` int(11) NOT NULL auto_increment,
  `role_short_name` varchar(255) default NULL,
  `role_long_name` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of roles
-- ----------------------------
INSERT INTO `roles` VALUES ('1', 'TRA', 'Tracking');
INSERT INTO `roles` VALUES ('2', 'EVE', 'Event Viewer');
INSERT INTO `roles` VALUES ('3', 'ADM', 'Administrator');
INSERT INTO `roles` VALUES ('4', 'SADM', 'Super Admin');
INSERT INTO `roles` VALUES ('5', 'VIS', 'Visitor');
INSERT INTO `roles` VALUES ('6', 'SMF', 'Stupid Mother Fucker');
INSERT INTO `roles` VALUES ('7', 'WSS', 'Wee Smoker');
INSERT INTO `roles` VALUES ('8', 'TST', 'toaster');

-- ----------------------------
-- Table structure for `sites`
-- ----------------------------
DROP TABLE IF EXISTS `sites`;
CREATE TABLE `sites` (
  `id` int(11) NOT NULL auto_increment,
  `site_name` varchar(255) default NULL,
  `site_key` varchar(255) default NULL,
  `site_inst_id` int(11) default NULL,
  `address` varchar(255) default NULL,
  `city` varchar(255) default NULL,
  `phone` varchar(255) default NULL,
  `fax` varchar(255) default NULL,
  `email` varchar(255) default NULL,
  `site_lock` enum('0','1') NOT NULL default '0',
  `site_desc` text,
  PRIMARY KEY  (`id`),
  KEY `inst-fk` (`site_inst_id`),
  CONSTRAINT `inst-fk` FOREIGN KEY (`site_inst_id`) REFERENCES `institutions` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of sites
-- ----------------------------
INSERT INTO `sites` VALUES ('1', 'Testtt', 'ASDFASFASFSDFSFSF2345345QWASASDF', '1', null, 'Temat', '02457073434', '1234123', 'nayibor@gmail.com', '1', '0');
INSERT INTO `sites` VALUES ('2', 'SilverBird', 'ASDFDSAFSA', '2', null, null, null, null, null, '0', '0');
INSERT INTO `sites` VALUES ('3', 'SilverBird Nigeria', 'ADSFSAUP787564', '2', null, null, null, null, null, '0', '0');
INSERT INTO `sites` VALUES ('4', 'STRIP CLUB', 'ADSFASDFKLJPIU34123415647', '1', null, 'Accra', '900908098', '090009', 'dollar@yahoo.com', '1', '0');
INSERT INTO `sites` VALUES ('5', 'Dredd ', null, '1', null, 'Dreed City', '877880', '0878097870', 'dede@as.com', '0', null);
INSERT INTO `sites` VALUES ('6', ' Default Site', null, '4', null, null, null, null, null, '0', null);
INSERT INTO `sites` VALUES ('7', 'Defalut2 Default Site', null, '5', 'adsfdsa', 'asdf', 'asdf', '908098', 'nay@a.com', '0', null);
INSERT INTO `sites` VALUES ('8', 'TESTS7777 Default Site', null, '7', 'ASDFDS', 'TESTE', 'TEST', '32332', '1380', '0', null);
INSERT INTO `sites` VALUES ('9', 'Local-First Default Site', null, '1', 'jjj', 'fracni', '98707', '0245707630', 'fasdf@hay.com', '0', 'j');
INSERT INTO `sites` VALUES ('10', 'Local-First Default Site', null, '1', 'jjj', 'fracni', '98707', '0245707630', 'fasdf@hay.com', '0', null);

-- ----------------------------
-- Table structure for `subscribers`
-- ----------------------------
DROP TABLE IF EXISTS `subscribers`;
CREATE TABLE `subscribers` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `EmailAddress` varchar(100) NOT NULL,
  `Name` varchar(200) default NULL,
  `ObjectId` int(10) unsigned default NULL,
  `SubDate` varchar(45) NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 COMMENT='stores the subscribers available';

-- ----------------------------
-- Records of subscribers
-- ----------------------------
INSERT INTO `subscribers` VALUES ('1', 'aluta182004@gmail.com', 'adu', '1', '2013-05-11 22:54:14');
INSERT INTO `subscribers` VALUES ('2', 'aluta182004@gmail.com', 'adu', '2', '2013-05-11 23:17:17');
INSERT INTO `subscribers` VALUES ('3', 'uriosco@gmail.com', 'uriel', '1', '2013-05-15 18:50:59');
INSERT INTO `subscribers` VALUES ('4', 'nayibor@gmail.com', 'nuku', '7', '2013-07-01 07:21:14');

-- ----------------------------
-- Table structure for `ticket_types`
-- ----------------------------
DROP TABLE IF EXISTS `ticket_types`;
CREATE TABLE `ticket_types` (
  `id` int(11) NOT NULL auto_increment,
  `event_id` int(11) default NULL,
  `type_name` varchar(255) default NULL,
  `type_html` varchar(5000) default NULL,
  `site_id` int(255) default NULL,
  `ticket_cost` double default NULL,
  `allow_batch_create` enum('1','0') default NULL,
  `inst_id` int(11) default NULL,
  `ticket_code` varchar(255) default NULL,
  `click_to_buy_link` varchar(250) default NULL,
  PRIMARY KEY  (`id`),
  KEY `event_fk` (`event_id`),
  KEY `sites_fk` (`site_id`),
  CONSTRAINT `event_fk` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`),
  CONSTRAINT `sites_fk` FOREIGN KEY (`site_id`) REFERENCES `sites` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of ticket_types
-- ----------------------------
INSERT INTO `ticket_types` VALUES ('1', '18', 'VIP', '<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\r\n  <head>\r\n   <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\r\n  </head>\r\n  <body leftmargin=\"0\" marginwidth=\"0\" topmargin=\"0\" marginheight=\"0\" offset=\"0\" bgcolor=\"#000000\">\r\nHello {email},start{event_start},end{event_end},event{event},cell{cell}\r\n<table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" class=\"backgroundTable\" bgcolor=\"#000000\"><tr><td valign=\"top\" align=\"center\" style=\"font-size: 12px;color: #000;line-height: 150%;font-family: trebuchet ms\">\r\n<table width=\"550\" cellpadding=\"0\" cellspacing=\"0\"><tr><td style=\"background-color: #000;border-top: 0 solid #000;border-bottom: 0 solid #FC6;text-align: right;font-size: 12px;color: #000;line-height: 150%;font-family: trebuchet ms\" align=\"center\"><span style=\"font-size:9px;color:#555555;line-height:200%;font-family:verdana;text-decoration:none;\">Email not displaying correctly? <a href=\"http://envato.s3.amazonaws.com/Birthday2009/Newsletter/birthday.html\" style=\"font-size: 9px;color: #888;line-height: 200%;font-family: verdana;text-decoration: none\">View it in your browser<br/>\r\n  .</a></span></td>\r\n</tr><tr><td style=\"background-color: #FFF;border-top: 0 solid #FFF;border-bottom: 0 solid #333;font-size: 12px;color: #000;line-height: 150%;font-family: trebuchet ms\"><center><a href=\"http://envato.com/birthday\" style=\"color: #c2e327\"><img src=\"http://envato.s3.amazonaws.com/Birthday2009/Newsletter/img/main_image.jpg\" width=\"550\" height=\"380\" border=\"0\" alt=\"Lorem ipsum\"/></a>\r\n</center></td>\r\n</tr></table><table width=\"550\" cellpadding=\"0\" cellspacing=\"0\" bgcolor=\"#FFFFFF\"><tr><td bgcolor=\"#000000\" valign=\"top\" style=\"font-size: 16px;color: #818181;line-height: 140%;font-family: arial\">\r\n<p align=\"center\">To celebrate <strong style=\"color:#cccccc\">Envatoâ€™s 3rd birthday</strong>, weâ€™re offering a very special Birthday Bundle that packs together 37 of our favourite items worth a total of $300 and offers them to you for a <strong style=\"color:#cccccc\">ridiculously low $20 price tag</strong>.  Included in the pack are top selling items that normally each cost more than this entire bundle!</p>\r\n<p align=\"center\">The Birthday Bundle is available for 3 days only (Aug 19 - 21 AEST) so youâ€™ll have to hurry!! <a href=\"http://envato.com/birthday\" style=\"color: #c2e327\">Click here for More Details of What\'s Included!</a></p>\r\n<p>Â </p>\r\n<p><a href=\"http://envato.com/birthday\" style=\"color: #c2e327\"><img src=\"http://envato.s3.amazonaws.com/Birthday2009/Newsletter/img/buynow.jpg\" width=\"550\" height=\"225\" border=\"0\"/></a><br/><br/></p></td>\r\n</tr><tr><td style=\"background-color: #000;padding-top: 20px;border-top: 1px solid #333;font-size: 9px;color: #818181;line-height: 140%;font-family: arial\" valign=\"top\"><a href=\"http://envato.com\" style=\"color: #c2e327\"><img src=\"http://envato.s3.amazonaws.com/Birthday2009/Newsletter/img/envato.jpg\" alt=\"Envato\" width=\"91\" height=\"22\" hspace=\"40\" border=\"0\" align=\"right\"/></a>This email was sent to you because you are subscribed to Envato Mail, the periodic newsletter of the Envato Marketplaces.   \r\n  <unsubscribe>To Unsubscribe from this List, Click Here </unsubscribe></td>\r\n</tr></table></td>\r\n</tr></table></body>\r\n</html>', '1', '50', '1', '1', 'A1', '');
INSERT INTO `ticket_types` VALUES ('3', '18', 'pos', 'asdfasdf', '1', '50', '1', '1', 'A8', '');

-- ----------------------------
-- Table structure for `tickets`
-- ----------------------------
DROP TABLE IF EXISTS `tickets`;
CREATE TABLE `tickets` (
  `id` int(11) NOT NULL auto_increment,
  `ticket_value` varchar(255) default NULL,
  `ticket_encrypted_value` varchar(255) default NULL,
  `ticket_redeem_status` enum('0','2','4','3','1') default '0',
  `ticket_event_id` int(11) default NULL,
  `ticket_batch_id` int(11) default NULL,
  `ritrieval_reference_number` int(11) default NULL,
  `ticket_down_status` enum('1','0') default NULL,
  `ticket_img` mediumblob COMMENT 'this is for the actual barcode ticket',
  `site_id` int(11) default NULL,
  `ticket_md5` varchar(50) default NULL,
  `unique_id_ticket` varchar(30) default NULL,
  `ticket_cdate` timestamp NULL default NULL on update CURRENT_TIMESTAMP,
  `ticket_type` int(11) default NULL,
  `ticket_email_receiver` varchar(255) default NULL,
  `ticket_text_receiver` varchar(255) default NULL,
  `ticket_text_message_status` enum('1','0') default NULL COMMENT 'check whether text message has been sent or not',
  `ticket_session_token` varchar(255) default NULL,
  `ticket_session_start` timestamp NULL default NULL,
  `ticket_session_end` timestamp NULL default NULL,
  PRIMARY KEY  (`id`),
  KEY `event_fk` (`ticket_event_id`),
  KEY `batch_fk` (`ticket_batch_id`),
  KEY `ticket-type-fk` (`ticket_type`),
  CONSTRAINT `batch-fk` FOREIGN KEY (`ticket_batch_id`) REFERENCES `batches` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `event-fk` FOREIGN KEY (`ticket_event_id`) REFERENCES `events` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `ticket-type-fk` FOREIGN KEY (`ticket_type`) REFERENCES `ticket_types` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=666 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of tickets
-- ----------------------------
INSERT INTO `tickets` VALUES ('661', '184921cd0b1a14451772dc6ce3c290ae15930c71', null, '2', '18', '28', null, null, 0xE280B0504E470D0A1A0A0000000D49484452000000E2809E000000E2809E01030000006BC5A011C3A400000006504C5445C3BFC3BFC3BF00000055C382C3937E000000C3AC4944415448E280B0C38DE2809D4112C383300803C3B9C281C3BEC3BF4B7EC2A04ACB9C747AC2AD7C09E284A278C3B01E3C16C38854C2BD2D487635C391C3AC4953C2A2C2BFC39BC3ACC2A439613B03C2B9C3A905C2A1C38FC3863D411504C3AF484DC2BD0AC3B8C395C3BE3F71C2B9377E7AC3B13F71E282ACC392C3B9C39D65E2809E76E282ACC2A40A2A72E2809AC39128C2AD5BC2BAE2809D14C3A1C3941D2C5E1079495BC3A2C3B1664A701C49C38B64C3A5C2A4C2BEE2809AC387C2A231C39113C2B103C2B4C387C2B96048C3BC46C3B4C39AC3B4C2A974670264C384C3A938C3817F4EC39C3EC39BC2B2C39DC38629594646C2A3E28093C3B27043C3A744C3AA7CC3A4C2B6212733C3937C3FC3973F27C39BC2B359C2B8E280934AC3884C124B3D35E280B9C389C5926BC38CC2BB7B1CE280A2111FE280B0C2B528C3AECB86C3ABC2AE4B3E4EC2B820383EC380053935C2B7C396C3AEC38EC3894E7E1FE280B9424EC39E151FC3A47DC38FC2A610C387C38A5F0000000049454E44C2AE4260E2809A, '1', '8b3f23184f0f534f46ac4e86a1090abf', '512a7f71-0310-46c4-b864-0b2ce4', '2013-09-11 08:27:06', '1', 'aluta182004@gmail.com', '0242182591', null, 'aei98tua7ohtp5jfu08i3sdu33', '2013-09-11 08:26:26', '2013-09-11 08:31:26');
INSERT INTO `tickets` VALUES ('662', 'b98f6917a535a8b2acfdc63eb86e3cb27ad4e679', null, '1', '18', '28', null, null, 0xE280B0504E470D0A1A0A0000000D49484452000000E2809E000000E2809E01030000006BC5A011C3A400000006504C5445C3BFC3BFC3BF00000055C382C3937E000000C3B24944415448E280B0C38DE280A2C38115C383300843C39940C3BB6FC2A90DC2A8E2809EC39DC3975C232E256E1FC3B9071530C390C2AA7FC2B3C3AE26C2AA58183726C3BAC2B0C2A153C3A4C2BCC2A5C2A44974E280B0C28DC2BB220D487C4F1C1CC3811DC391E28098C3A3623D727F4F5CC3AE6BC28FC2BB784FC5BDC2A95EC3B57B4BCB86C3947CE282ACE2809A2C27C2AEE280A265C38F0D7043C3A44DC5BD384166C3847E5BC39AC2ADE282ACC593C2B82FE280A2C2A7C2A3C3943763226DC3B4C3AD05564EC39CE280982066C3A86EE2809E11693D33C2B5C5BEC2BA5A106FC290E280B01237C393C5924852C5BD1EC3B0E280BA69462CC3A7C3A5360D5A39C3A9C3A9C3AC6903C5BE0DE284A211384D75C28107C3B7C3BE5642C2A6C3965EC28F23C38ECB9CC3B424C3A8C3AEC3A4093024C2B3C38E5C2A4F0C16C2A4C3AFC3B07FC3BFCB8616E2809E77C39D024BC392C2AE15C5A11B62C3A8C382C3AB1A37642AC28FE28098C29D4853C3B25FC3B6015025C39EC2A639C3AFC5A01C0000000049454E44C2AE4260E2809A, '1', '17c9227c60da56cc65655f7e0143835d', '512a7f72-12dc-44fc-98e3-0b2ce4', '2013-09-26 16:55:13', '1', null, null, null, 'd1ug34ll06ma4bsf5qcgdrds97', '2013-09-26 16:55:13', '2013-09-26 17:00:13');
INSERT INTO `tickets` VALUES ('663', '2946b1b560a48f098a1d139ad20a81575dd630ba', null, '2', '18', '28', null, null, 0xE280B0504E470D0A1A0A0000000D49484452000000E2809E000000E2809E01030000006BC5A011C3A400000006504C5445C3BFC3BFC3BF00000055C382C3937E000000C3B14944415448E280B0C38DE2809DC3891503310C42C39501C3BD77C2A90ECB86404EC39E5C075FC3A26CC5BE7F503046C2AAC3BAC2B745C2B2C2ABC3A77DC2B629E284A24F77C69240C2B7C5B85242C3AFC3903CC39B0BC382C2B6C38A6B02C3BDC2A2C3AECB86201AC2A8C3A7C399C39F13C3997DC396C3A32EC39E132DC3B95E7CC2A6C3A13DE284A26A241C040039E284A2044051C2906F37647CE28099C3A1E280B936E284A211197523C28F2AC39BC3AB5748C2AAC28F445DC3A515E280985DC39005367232C392C2A6C39FC2A86FC2A06F484F12C39C732B33244A42C2B95508C3BE1215C290E280993A656A2E702B47C38446692229C3A23E6948C3B46A03C3AE4943C382C3AD5DC3BF052B26C3B66867647DC3BB3F21C2AEC2BB5D37C2B573C3A2C2A25CC2BB56604868C2BFC38AC6920DE280944443C3A03BC2BAC2AF082CC3AFC5933423E280A0C39AC5BE011912394FE280BA2EE2809839C3B9C2AFC3B5016973C38FC3A2C3801911180000000049454E44C2AE4260E2809A, '1', '25e496a9a49f8d9190cbd6d615a6fe91', '512a7f72-bcf4-471a-b516-0b2ce4', '2013-08-05 05:17:21', '1', null, null, null, ' ', null, null);
INSERT INTO `tickets` VALUES ('664', '2d618f3ad09f9c813046129eb4c506aa29d76c67', null, '2', '18', '28', null, null, 0xE280B0504E470D0A1A0A0000000D49484452000000E2809E000000E2809E01030000006BC5A011C3A400000006504C5445C3BFC3BFC3BF00000055C382C3937E000000C3B44944415448E280B0C38DE2809DC38B0DC384400843C39D01C3BD77C3A90E581B1265C2AFC3B15CE2809AE2809DCB867907C384C387007CC38DC2BAE280BA20E280B0C3A6C2B829C391C2A777C3A941C38E2B257D7922C3A31E102557451CE2809C72C39CC3A2193154C2A1E280A04FC3ADC3AF494FC2AFC386C3BE66C3B1C5BEC398C2AA67E280A07FC3B6C5BEC2B41550E280A0C3AA5A1D10C395C2A9C3A45CC2A4E2809A3327E280A65E4515C2AFC38819C28107C3980E2CC384CB9C58054EC3912A1810123B77C3BFC2B7C3BD19E284A262C39B594AC3A4E280A6C593687670C397C593C3A90129C3AFC5A0E2809D501202CB9C132BC3897A580D30264AC38BC2A1C2AD4F6CC38342020FC38EC2BA2AC2AC1242C3A21A316BC39BC2BE0329C2B972C5A13FC381CB9CC38C25E284A2257174C38464C38E59C3AFC39EC3B65D7B42C2ACC3ABC2BD24C2B7C3A673C2A2C5B80FC392C3AE4C4E1AC2A304C3B609C381C39638051FC290C3A93CC3B8C3883C24C39FC2B21FC390C383C2BCC3A6C38AC2A501170000000049454E44C2AE4260E2809A, '1', '03915c731708e25d9fb4c8ab23be6739', '512a7f73-b760-40cd-af5b-0b2ce4', '2013-08-05 05:17:21', '1', null, null, null, ' ', null, null);
INSERT INTO `tickets` VALUES ('665', '1914883bf75c6cd8578dfc34a26b74b80923ed91', null, '2', '18', '28', null, null, 0xE280B0504E470D0A1A0A0000000D49484452000000E2809E000000E2809E01030000006BC5A011C3A400000006504C5445C3BFC3BFC3BF00000055C382C3937E000000C3B14944415448E280B0C38DE2809DC391C28DC383300C43C2B501C3B7C39FE280991BC3A8443AC3AEC3B537C3944FC28D02555E00C385C2A26956C3BDC39AC3AA6E16C3892AC2BA4CE280B04A12C3B3C38A654EC39A5D0BC3B3C382C3A5E2809AC38C0FC3AC5A13143CC3ADC5A008C2AA2FC2BE677F4F24C3B7C2B3C2BEC38EC3A23DC391426BC28FC3B72923C393C2AD050A5A39C2A1C3851AC3B8C3B9544666C2BCC2B6110C19133CC2B604C2A17DC386640A697F76C39A0B722C506E0BC38644C39BC6921C30E2809CC3B6E2809A1023C398C2B4E280A235E280B939116AC3BBE280BAC3B71023C2A20BC397577977C38ECB86C3B4C2A6C2A45212C394E2809AC3A8C5B816C3AD76C38EC38849C2A2C2A9C3BBC2B179462C1AC38BC2A7771CE280A211C385C3873C39023E772720C5BDC2B3E280985E49720229241AC39376C392C2A44B52372DE28094C3A4C398C593E280A605C2B1C3B0C2AD74C384C3BFC3ACC3AF49C5B81CC2A16F0C72C3B25BC3AB0FC5BE14C2B566C2BC3AC2A8E280A10000000049454E44C2AE4260E2809A, '1', 'c0aa444331c562e40923a86878413397', '512a7f73-a3d0-452e-afae-0b2ce4', '2013-08-05 05:17:21', '1', null, null, null, ' ', null, null);

-- ----------------------------
-- Table structure for `transactions`
-- ----------------------------
DROP TABLE IF EXISTS `transactions`;
CREATE TABLE `transactions` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `TransAmount` float NOT NULL,
  `TransDate` varchar(45) NOT NULL,
  `Status` varchar(45) NOT NULL,
  `Institution` int(10) unsigned NOT NULL,
  `Description` varchar(200) NOT NULL,
  `EventId` varchar(45) NOT NULL,
  `TicketId` varchar(45) NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='stores the list of transactions processed';

-- ----------------------------
-- Records of transactions
-- ----------------------------

-- ----------------------------
-- Table structure for `user_roles`
-- ----------------------------
DROP TABLE IF EXISTS `user_roles`;
CREATE TABLE `user_roles` (
  `id` int(11) NOT NULL auto_increment,
  `role_id` int(11) default NULL,
  `user_id` int(11) default NULL,
  PRIMARY KEY  (`id`),
  KEY `role-fk` (`role_id`),
  CONSTRAINT `role-fk` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=144 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of user_roles
-- ----------------------------
INSERT INTO `user_roles` VALUES ('35', '1', '58');
INSERT INTO `user_roles` VALUES ('36', '3', '58');
INSERT INTO `user_roles` VALUES ('37', '5', '58');
INSERT INTO `user_roles` VALUES ('38', '1', '59');
INSERT INTO `user_roles` VALUES ('39', '2', '59');
INSERT INTO `user_roles` VALUES ('40', '4', '59');
INSERT INTO `user_roles` VALUES ('104', '1', '1');
INSERT INTO `user_roles` VALUES ('105', '2', '1');
INSERT INTO `user_roles` VALUES ('106', '4', '1');
INSERT INTO `user_roles` VALUES ('107', '5', '1');
INSERT INTO `user_roles` VALUES ('108', '6', '1');
INSERT INTO `user_roles` VALUES ('109', '1', '60');
INSERT INTO `user_roles` VALUES ('110', '4', '60');
INSERT INTO `user_roles` VALUES ('111', '5', '60');
INSERT INTO `user_roles` VALUES ('112', '2', '61');
INSERT INTO `user_roles` VALUES ('113', '3', '61');
INSERT INTO `user_roles` VALUES ('114', '4', '61');
INSERT INTO `user_roles` VALUES ('115', '6', '61');
INSERT INTO `user_roles` VALUES ('116', '6', '62');
INSERT INTO `user_roles` VALUES ('117', '3', '1');
INSERT INTO `user_roles` VALUES ('136', '1', '66');
INSERT INTO `user_roles` VALUES ('137', '2', '66');
INSERT INTO `user_roles` VALUES ('138', '3', '66');
INSERT INTO `user_roles` VALUES ('139', '4', '66');
INSERT INTO `user_roles` VALUES ('140', '5', '66');
INSERT INTO `user_roles` VALUES ('141', '6', '66');
INSERT INTO `user_roles` VALUES ('142', '7', '66');
INSERT INTO `user_roles` VALUES ('143', '8', '66');

-- ----------------------------
-- Table structure for `users`
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` int(11) NOT NULL auto_increment,
  `password` varchar(255) NOT NULL,
  `fname` varchar(255) default NULL,
  `lname` varchar(255) default NULL,
  `site_id` int(11) default NULL,
  `user_email` varchar(255) default NULL,
  `lock_status` int(11) default '0',
  `dob` timestamp NULL default NULL on update CURRENT_TIMESTAMP,
  `salt` varchar(255) default NULL,
  PRIMARY KEY  (`id`),
  KEY `site-fk` (`site_id`),
  CONSTRAINT `site-fk` FOREIGN KEY (`site_id`) REFERENCES `sites` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=79 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of users
-- ----------------------------
INSERT INTO `users` VALUES ('1', 'fe6794aa10475dbea1946a233df66fc5', 'Yao', 'Ameyiborrrr', '1', 'nayibor@gmail.com', '0', '2013-11-14 10:19:19', null);
INSERT INTO `users` VALUES ('60', '177a07541c40f15074c2a42d6f18989c', 'Lion Faatatokp', 'vrliontt', '4', 'vlionr@qwe.com', '0', '2013-02-10 19:16:35', null);
INSERT INTO `users` VALUES ('61', 'b6adcbf620013ddc514957f49c8af5f1', 'Gg', 'Korley', '1', 'gkorley@ecobank.com', '0', '2013-02-10 19:34:04', null);
INSERT INTO `users` VALUES ('65', '43bae54d3710b68d382edf5f1b04a302', 'Don', 'Upper', '4', 'ruckuper@qq.com', '0', '2013-02-20 18:00:41', null);
INSERT INTO `users` VALUES ('66', '90bba2f6cf4d5f9db4ad8ef86e9d648b', 'Tester', 'tester', '1', 'test@yahoo.ocm', '0', '2013-02-20 23:11:44', null);
INSERT INTO `users` VALUES ('76', '', null, null, null, null, '1', null, null);
INSERT INTO `users` VALUES ('77', '', null, null, null, null, '1', null, null);
INSERT INTO `users` VALUES ('78', '', null, null, null, null, '1', null, null);

-- ----------------------------
-- Table structure for `venues`
-- ----------------------------
DROP TABLE IF EXISTS `venues`;
CREATE TABLE `venues` (
  `Id` int(10) unsigned NOT NULL auto_increment,
  `Venue` varchar(200) NOT NULL,
  `Location` varchar(200) NOT NULL,
  `Longitude` float NOT NULL,
  `Latitude` float NOT NULL,
  PRIMARY KEY  (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='stores all the venues available';

-- ----------------------------
-- Records of venues
-- ----------------------------

-- ----------------------------
-- Procedure structure for `sp_get_eventtype_count`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_get_eventtype_count`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_get_eventtype_count`()
BEGIN
   SELECT a.Id,a.EventType,COUNT(*) as num,a.Logo FROM events b,eventtypes a WHERE a.EventType=b.event_type;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_get_price`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_get_price`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_get_price`(in idnum integer,in type varchar(200))
BEGIN
     SELECT ticket_cost from ticket_types where event_id=idnum and type_name=type;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_get_tickettypes_event`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_get_tickettypes_event`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_get_tickettypes_event`(in idnum integer)
BEGIN
   SELECT DISTINCT a.*,'2' as ticket_redeem_status FROM ticket_types a,tickets b where a.event_id=idnum and a.id=b.ticket_type AND a.id in(select ticket_type from tickets where ticket_redeem_status=2);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_app`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_app`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_app`(IN app varchar(100),in appname varchar(200),in appstatus varchar(100),in appkey varchar(100),in devid integer)
BEGIN
   insert into apps values(app,appname,NOW(),appdate,appstatus,appkey,devid);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_appuser`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_appuser`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_appuser`(in email varchar(100),in passwd varchar(100),in contact varchar(45),in addr varchar(100))
BEGIN
   INSERT INTO appusers(EmailAddress,Password,ContactNo,Address,Status,DateReg)VALUES(email,passwd,contact,addr,'Active',NOW());
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_batches`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_batches`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_batches`(name  varchar(100),batch_eveId varchar(100),batch_allow_down  varchar(100),createdate varchar(100),cost float,rrn  varchar(100),ticknum varchar(100),lastupdate varchar(100),site_id  varchar(100),verifistart  varchar(100),
                                            verifiend  varchar(100),statustick  varchar(100),statusemail  varchar(100),batcategory  varchar(100),
                                            mediumdel  varchar(100),tticktype  varchar(100),apytick  varchar(100))
BEGIN
  INSERT INTO batches(batch_name,batch_event_id,batch_allow_download,batch_create_date,ticket_cost,rrn,batch_ticket_number,batch_last_update_dt,site_id,batch_verification_start,batch_verification_end,batch_status_tickets,batch_status_email,batch_category,medium_del,ticketype,apy_ticket)
  values(name,batch_eveId,batch_allow_down,createdate,cost,rrn,ticknum,lastupdate,site_id,verifistart,verifiend,statustick,statusemail,batcategory,
                                            mediumdel,tticktype,apytick);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_category`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_category`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_category`(shrtname varchar(100),lngname varchar(100),inst varchar(100))
BEGIN
    INSERT INTO categories(short_name,long_name,inst_id)values(shrtname,lngname,inst);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_events`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_events`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_events`(evename varchar(100),evestart varchar(100),eveend varchar(100),eveloc varchar(100),refno varchar(100),site varchar(100))
BEGIN
   INSERT INTO events(event_name,event_start,event_end,event_location,retrieval_reference_number,site_id,event_banner)
   values(evename,evestart,eveend,eveloc,refno,site,evebanner);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_eventtype`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_eventtype`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_eventtype`(in evetyp varchar(100),in logo longblob)
BEGIN
   INSERT INTO eventtypes(EventType,Logo)Values(evetyp,logo);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_favourite`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_favourite`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_favourite`(in itmId integer,in userId varchar(100),in typ varchar(100))
BEGIN
   INSERT INTO favourites(ItemId,UserId,Type)values(itmId,userId,typ);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_institution`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_institution`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_institution`(shrtname varchar(100),lngname varchar(100),instloc varchar(100),email varchar(100),phone varchar(100),fax varchar(100),city varchar(100),addr varchar(100),descr varchar(100),img longblob)
BEGIN
  insert into institutions(inst_short_name,inst_long_name,inst_lock,email,phone,fax,city,description,address,image_cus_site)
  values(shrtname,lngname,instloc,email,phone,fax,city,descr,addr,img);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_links`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_links`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_links`(controller varchar(100),action varchar(100),allow varchar(100),category varchar(100),lname varchar(100),param varchar(100))
BEGIN
   INSERT INTO links(link_controller,link_action,link_allow,link_category,link_name,parameter)
   values(controller,action,allow,category,lname,param);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_logs`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_logs`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_logs`(logtype varchar(100),text varchar(100),site varchar(100),action varchar(100))
BEGIN
     insert into logs(log_type,log_text_reason,site_id,user_action)values(logtype,text,site,action);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_member`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_member`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_member`(in email varchar(100),in fname varchar(100),in lname varchar(100),in cell varchar(100),in cat varchar(100),in site varchar(100))
BEGIN
    INSERT INTO members(email,fname,lname,cell_number,cat_id,site_id)values(email,fname,lname,cell,cat,site);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_member_ticket`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_member_ticket`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_member_ticket`(banner varchar(100),ticket varchar(100),site varchar(100),event varchar(100),del varchar(100),cellnum varchar(100))
BEGIN
   INSERT INTO member_ticket(email_banner,ticket_id,site_id,event_id,del_medium,cell_number_member)
   values(banner,ticket,site,event,del,cellnum);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_payments`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_payments`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_payments`( IN tt FLOAT, IN pd VARCHAR( 45 ) , IN descr VARCHAR(200) , IN eveid VARCHAR(45) , IN tick VARCHAR(45) , IN email VARCHAR(45))
BEGIN 
INSERT INTO payments( MMAcc, Total, PayDate, Description, EventId, Ticket ) VALUES (email, tt, pd, descr, eveid, tick);
end
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_role_link`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_role_link`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_role_link`(in link varchar(100),in role varchar(100))
BEGIN
     INSERT INTO role_links(link_id,role_id)VALUES(link,role);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_roles`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_roles`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_roles`(in shrtname varchar(100),in lngname varchar(100))
BEGIN
   insert into roles(role_short_name,role_long_name)values(shrtname,lngname);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_sites`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_sites`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_sites`(in name varchar(100),in key_ varchar(100),in inst varchar(100),in addr varchar(100),in cty varchar(100),in phn varchar(100),in fx varchar(100),in ema varchar(100),in lck varchar(100),in descr varchar(100))
BEGIN
   insert into sites(site_name,site_key,site_inst_id,address,city,phone,fax,email,site_lock,site_desc)values(name,key_,inst,addr,cty,phn,fx,ema,lck,descr);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_ticket_types`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_ticket_types`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_ticket_types`(in eveid varchar(100),in typ varchar(100),in html varchar(100),in site varchar(100),in cost varchar(100),in allow varchar(100),in inst varchar(100),in tickcode varchar(100))
BEGIN
   INSERT INTO ticket_type(event_id,type_name,type_html,site_id,ticket_cost,allow_batch_create,inst_id,ticket_code)values(eveid,typ,html,site,cost,allow,inst,tickcode);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_tickets`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_tickets`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_tickets`()
BEGIN

END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_user`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_user`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_user`(in passwd varchar(100),in fnam varchar(100),in lnam varchar(100),in site varchar(100),in email varchar(100),in lck varchar(100),in dob varchar(100),in slt varchar(100))
BEGIN
   INSERT INTO users(password,fname,lname,site_id,user_email,lock_status,dob,salt)values(passwd,fnam,lnam,site,email,lck,dob,slt);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_user_roles`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_user_roles`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_user_roles`(in role varchar(100),in user varchar(100))
BEGIN
   insert into user_roles(role_id,user_id)values(role,user);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_ins_venue`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_ins_venue`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_ins_venue`(in venue varchar(200),in loc VARCHAR(100),IN lon float,in lat float)
BEGIN
   INSERT INTO venues(Venue,Location,Longitude,Latitude)VALUES(venue,loc,lon,lat);
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_justin_events`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_justin_events`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_justin_events`()
BEGIN
   SELECT * FROM events;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_login_user`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_login_user`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_login_user`(in email varchar(100),in passwd varchar(100))
BEGIN
 SELECT * FROM appusers where EmailAddress=email and Password=passwd;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_nearby_events`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_nearby_events`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_nearby_events`(in lat float,in lon float)
BEGIN
      SELECT a.*,CalcDistance(lat,lon,b.Latitude,b.Longitude) as distance FROM tbevents a,tbvenue b where a.event_location=b.venue ORDER By distance ASC;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_role_link_link`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_role_link_link`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_role_link_link`(in link varchar(100))
BEGIN
   SELECT * FROM role_links where link_id=link;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_search_db`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_search_db`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_search_db`(in  search varchar(200))
BEGIN
   SELECT a.id,a.inst_long_name as name,'organiser' as type FROM institutions a where inst_long_name like search or description like search
   UNION SELECT b.id,b.event_name as name,'event' as type from events b where event_name like search;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_app`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_app`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_app`(in id varchar(100))
BEGIN
   select * from apps where appId=id;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_apps_dev`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_apps_dev`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_apps_dev`(in dev integer)
BEGIN
   SELECT * FROM apps where DevId=dev;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_batch_eveId`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_batch_eveId`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_batch_eveId`(IN eve varchar(100))
BEGIN
   SELECT * FROM batches WHERE batch_event_id=eve;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_batch_type`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_batch_type`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_batch_type`(IN type varchar(100))
BEGIN
    SELECT * FROM batches WHERE ticketype=type;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_category`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_category`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_category`(idnum integer)
BEGIN
   SELECT * FROM categories WHERE id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_category_lngname`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_category_lngname`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_category_lngname`(lngname varchar(100))
BEGIN
   SELECT * FROM categories WHERE long_name=lngname;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_category_shrtname`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_category_shrtname`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_category_shrtname`(shrt varchar(100))
BEGIN
   SELECT * FROM categories WHERE short_name=shrt;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_event`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_event`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_event`(idnum integer)
BEGIN
   SELECT * FROM events where Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_event_organiser`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_event_organiser`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_event_organiser`(in instid integer)
BEGIN
   SELECT a.* FROM events a,sites b WHERE b.site_inst_id=instid AND a.site_id=b.id;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_favourite_user`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_favourite_user`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_favourite_user`(in email varchar(100))
BEGIN
     SELECT * FROM favourites where UserId=email;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_institution`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_institution`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_institution`(idnum integer)
BEGIN
 SELECT * FROM institutions where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_links`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_links`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_links`(idnum integer)
BEGIN
   SELECT * FROM links where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_log`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_log`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_log`(idnum integer)
BEGIN
   SELECT * FROM logs where Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_log_site`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_log_site`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_log_site`(site varchar(100))
BEGIN
   SELECT * FROM logs where site_id=site;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_log_type`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_log_type`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_log_type`(typ varchar(100))
BEGIN
   SELECT * FROM logs where log_type=typ;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_member`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_member`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_member`(in idnum integer)
BEGIN
   SELECT * FROM members where Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_member_site`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_member_site`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_member_site`(in site varchar(100))
BEGIN
   SELECT * FROM members where site_id=site;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_member_ticket`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_member_ticket`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_member_ticket`(ticket varchar(100))
BEGIN
    select * from member_ticket where ticket_id=ticket;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_memberticket_event`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_memberticket_event`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_memberticket_event`(event varchar(100))
BEGIN
   SELECT * FROM member_ticket where event_id=event;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_role`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_role`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_role`(in idnum integer)
BEGIN
   SELECT * FROM roles where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_role_link`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_role_link`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_role_link`(in idnum integer)
BEGIN
     SELECT * FROM Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_role_links_role`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_role_links_role`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_role_links_role`(in role varchar(100))
BEGIN
   SELECT * FROM role_links where role_id=role;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_site_id`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_site_id`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_site_id`(in idnum integer)
BEGIN
   SELECT * FROM sites where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_site_key`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_site_key`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_site_key`(in key_ varchar(100))
BEGIN
   SELECT * FROM sites where site_key=key_;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_site_name`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_site_name`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_site_name`(in name varchar(100))
BEGIN
   SELECT * FROM sites where site_name=name;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_sites_inst`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_sites_inst`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_sites_inst`(in inst integer)
BEGIN
   SELECT * FROM sites where site_inst_id=inst;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_code`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_code`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_code`(in code varchar(100))
BEGIN
   SELECT * FROM ticket_types WHERE ticket_code=code;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_details`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_details`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_details`(in event varchar(100),in typeid varchar(100))
BEGIN
   SELECT * FROM ticket_types where event_id=event and id=typeid;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_eveid`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_eveid`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_eveid`(in eveid varchar(100))
BEGIN
   SELECT DISTINCT * FROM ticket_types WHERE event_id=eveid;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_id`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_id`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_id`(in idnum integer)
BEGIN
   SELECT * FROM ticket_types WHERE Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_inst`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_inst`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_inst`(in inst varchar(100))
BEGIN
   SELECT * FROM ticket_types where inst_id=inst;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_site`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_site`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_site`(in site varchar(100))
BEGIN
   SELECT * FROM ticket_types WHERE site_name=site;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_types_typ`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_types_typ`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_types_typ`(in typ varchar(100))
BEGIN
   SELECT * FROM ticket_types where type_name=typ;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_ticket_user`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_ticket_user`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_ticket_user`(in email varchar(100))
BEGIN
   select a.*,b.ticket_cost,c.event_name from tickets a,ticket_types b,events c where a.ticket_email_receiver=email and a.ticket_event_id=b.event_id and a.ticket_event_id=c.id;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_user_id`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_user_id`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_user_id`(in idnum integer)
BEGIN
  SELECT * FROM users WHERE Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_user_role_user`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_user_role_user`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_user_role_user`(in user varchar(100))
BEGIN
   SELECT * FROM user_roles where user_id=user;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_sel_user_site`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_sel_user_site`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_sel_user_site`(in site varchar(100))
BEGIN
   SELECT * FROM users WHERE site_id=site;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_banner`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_banner`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_banner`()
BEGIN
   SELECT * FROM events;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_batches`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_batches`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_batches`()
BEGIN
    SELECT * FROM batches;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_category`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_category`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_category`()
BEGIN
   SELECT * FROM categories;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_events`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_events`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_events`()
BEGIN
   SELECT * FROM events;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_eventtypes`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_eventtypes`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_eventtypes`()
BEGIN
  SELECT * FROM eventtypes;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_institution`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_institution`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_institution`()
BEGIN
    select * from institutions order by id desc;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_links`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_links`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_links`()
BEGIN
   SELECT * FROM links;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_logs`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_logs`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_logs`()
BEGIN
   SELECT * FROM logs;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_members`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_members`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_members`()
BEGIN
   SELECT * FROM members;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_memberticket`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_memberticket`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_memberticket`()
BEGIN
   select * from member_ticket;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_role_links`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_role_links`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_role_links`()
BEGIN
   SELECT * FROM role_links;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_roles`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_roles`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_roles`()
BEGIN
   SELECT * FROM roles;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_sites`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_sites`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_sites`()
BEGIN
   SELECT * FROM sites;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_ticket_types`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_ticket_types`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_ticket_types`()
BEGIN
   SELECT * FROM ticket_types;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_user_roles`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_user_roles`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_user_roles`()
BEGIN
   SELECT * FROM user_roles;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_selall_venue`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_selall_venue`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_selall_venue`()
BEGIN
   SELECT * FROM venues;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_subscribe_organiser`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_subscribe_organiser`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_subscribe_organiser`(in email varchar(100),in name varchar(100),in id integer)
BEGIN
   INSERT INTO subscribers(EmailAddress,Name,ObjectId,SubDate)VALUES(email,name,id,NOW());
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_unsubscribe`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_unsubscribe`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_unsubscribe`(in email varchar(100))
BEGIN
   DELETE FROM subscribers WHERE EmailAddress=email;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upcoming_events`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upcoming_events`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upcoming_events`()
BEGIN
   SELECT * FROM events where event_start>=NOW();
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_app`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_app`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_app`(IN app varchar(100),in appn varchar(200),in status varchar(100))
BEGIN
   update apps set Appname=appn,AppStatus=status where AppId=app;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_batches`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_batches`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_batches`(idnum int, field varchar(100),value varchar(100))
BEGIN
   UPDATE batches set field=value WHERE Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_categories`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_categories`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_categories`(shrtname varchar(100),lngname varchar(100),idnum int)
BEGIN
   UPDATE categories SET short_name=shrtname,long_name=lngname WHERE Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_event`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_event`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_event`(evename varchar(100),evestart varchar(100),eveend varchar(100),eveloc varchar(100),refno varchar(100),site varchar(100),evebanner longblob,idnum integer)
BEGIN
  UPDATE events set event_name=evename,event_start=evestart,event_end=eveend,event_location=eveloc,retrieval_reference_number=refno,site_id=site,event_banner=evebanner where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_institution`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_institution`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_institution`(idnum integer,shrtname varchar(100),lngname varchar(100),loc varchar(100),emai varchar(100),ph varchar(100),fx varchar(100),cty varchar(100),descr varchar(100),addr varchar(100),img longblob)
BEGIN
  update institutions set inst_short_name=shrtname,inst_long_name=lngname,inst_lock=loc,email=emai,phone=ph,fax=fx,city=cty,description=descr,
  address=addr,image_cus_site=img where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_links`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_links`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_links`(controller varchar(100),action varchar(100),allow varchar(100),category varchar(100),lname varchar(100),param varchar(100))
BEGIN
    UPDATE links set link_controller=controller,link_action=action,link_allow=allow,link_category=category,link_name=lname,parameter=param
    where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_member_ticket`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_member_ticket`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_member_ticket`(banner varchar(100),ticket varchar(100),site varchar(100),event varchar(100),del varchar(100),cellnum varchar(100),idnum integer)
BEGIN
   update member_ticket set email_banner=banner,ticket_id=ticket,site_id=site,event_id=event,del_medium=del,cell_number_member=cellnum
   where id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_role`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_role`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_role`(in shrtname varchar(100),in lngname varchar(100),in idnum integer)
BEGIN
   UPDATE roles set role_short_name=shrtname,role_long_name=lngname WHERE Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_role_links`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_role_links`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_role_links`(in link varchar(100),in role varchar(100),in idnum integer)
BEGIN
   UPDATE role_links set link_id=link,role_id=role where Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_sites`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_sites`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_sites`(in name varchar(100),in key_ varchar(100),in inst varchar(100),in addr varchar(100),in cty varchar(100),in phn varchar(100),in ema varchar(100),in lck varchar(100),in descr varchar(100),in idnum integer)
BEGIN
UPDATE sites set site_name=name,site_key=key_,site_inst_id=inst,address=addr,city=cty,phone=phn,fax=fx,email=ema,site_lock=lck,site_desc=descr where Id=idnum;
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for `sp_upd_user`
-- ----------------------------
DROP PROCEDURE IF EXISTS `sp_upd_user`;
DELIMITER ;;
CREATE DEFINER=`mobiticketz`@`%` PROCEDURE `sp_upd_user`(in passwd varchar(100),in fnam varchar(100),in lnam varchar(100),in site varchar(100),in email varchar(100),in lck varchar(100),in db varchar(100),in slt varchar(100),in idnum integer)
BEGIN
     update users set password=passwd,fname=fnam,lname=lnam,site_id=site,user_email=email,lock_status=lck,dob=db,salt=slt where id=idnum;
END
;;
DELIMITER ;
